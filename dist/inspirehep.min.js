/*
 * This file is part of INSPIRE.
 * Copyright (C) 2016 CERN.
 *
 * INSPIRE is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as
 * published by the Free Software Foundation; either version 2 of the
 * License, or (at your option) any later version.
 *
 * INSPIRE is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with INSPIRE; if not, write to the Free Software Foundation, Inc.,
 * 59 Temple Place, Suite 330, Boston, MA 02111-1307, USA.
 *
 * In applying this license, CERN does not
 * waive the privileges and immunities granted to it by virtue of its status
 * as an Intergovernmental Organization or submit itself to any jurisdiction.
 */
!function(e){e.module("inspirehep",["citemodal"])}(angular),function(e){e.module("citemodal",["ui.bootstrap","citemodal.directives","citemodal.services","citemodal.controllers"])}(angular),function(e){function t(e,t,o,n){function a(){u.loadFormat()}function r(){t.close()}function i(e){u.exportFormat=e}function c(e,t){e!==t&&u.loadFormat()}function l(){function e(e){u.exportContent=e.data}function t(){console.log("Error request")}function n(){u.loading=!1}u.loading=!0,o.getFormat(u.exportFormat,u.recid).then(e,t).finally(n)}var u=this;u.formats=["BibTex","LaTex(EU)","LaTex(US)"],u.recid=n,u.exportContent=null,u.loading=!1,u.exportFormat="BibTex",u.changeFormat=i,u.closeModal=r,u.loadFormat=l,a(),e.$watch("vm.exportFormat",c)}t.$inject=["$scope","$uibModalInstance","exportAPI","recid"],e.module("citemodal.controllers",[]).controller("modalInstanceCtrl",t)}(angular),function(e){function t(e){function t(t,o,n){t.openModal=function(t){e.open({animation:!0,templateUrl:n.bodyTemplate,size:t,controller:"modalInstanceCtrl",controllerAs:"vm",resolve:{recid:function(){return n.recid}}})}}function o(e,t){return t.buttonTemplate}return{templateUrl:o,restrict:"E",scope:!1,link:t}}t.$inject=["$uibModal"],e.module("citemodal.directives",[]).directive("inspireCiteModal",t)}(angular),function(e){function t(e){function t(t,o){var n={},a="/api/literature/"+o;switch(t){case"BibTex":n.headers={Accept:"application/x-bibtex"};break;case"LaTex(EU)":n.headers={Accept:"application/x-latexeu"};break;case"LaTex(US)":n.headers={Accept:"application/x-latexus"}}return e.get(a,n)}var o={getFormat:t};return o}t.$inject=["$http"],e.module("citemodal.services",[]).service("exportAPI",t)}(angular);